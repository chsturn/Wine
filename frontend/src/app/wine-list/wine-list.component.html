<h2>Wine List</h2>

<div *ngIf="error()" class="error">
  {{ error() }}
</div>

<div *ngIf="wines().length > 0; else noWines" class="wine-grid">
  <a *ngFor="let wine of wines()" [routerLink]="['/wines', wine._id]" class="wine-card-link">
    <div class="wine-card">
      <div class="wine-details">
        <h3>{{ wine.name }} ({{ wine.year }})</h3>
      <p><strong>Winery:</strong> {{ wine.winery }}</p>
      <p><strong>Region:</strong> {{ wine.region }}</p>
      <p><strong>Grape:</strong> {{ wine.grapeVariety }}</p>
      <p><strong>Alcohol:</strong> {{ wine.alcoholPercentage }}%</p>
      <p><strong>Description:</strong> {{ wine.description }}</p>

      <div *ngIf="isEditor()" class="card-actions">
        <button class="btn-edit" (click)="$event.stopPropagation(); editWine(wine._id!)">Edit</button>
        <button class="btn-delete" (click)="$event.stopPropagation(); deleteWine(wine._id!)">Delete</button>
      </div>
    </div>
    </div>
  </a>
</div>

<ng-template #noWines>
  <p>No wines to display. Loading...</p>
</ng-template>
